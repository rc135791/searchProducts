{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\RahulChauhan\\\\Desktop\\\\screenshots\\\\containers crush\\\\github projects\\\\shopping_cart_final\\\\searchProducts\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\RahulChauhan\\\\Desktop\\\\screenshots\\\\containers crush\\\\github projects\\\\shopping_cart_final\\\\searchProducts\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport axios from \"axios\";\nexport var truncStr = function truncStr(string, limit) {\n  return string.length > limit ? string.trim().substring(0, limit - 3).trim() + \"...\" : string;\n};\nvar resources = {};\n\nvar makeRequestCreator = function makeRequestCreator() {\n  var cancel;\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(query) {\n        var res, result;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (cancel) {\n                  // Cancel the previous request before making a new request\n                  cancel.cancel();\n                } // Create a new CancelToken\n\n\n                cancel = axios.CancelToken.source();\n                _context.prev = 2;\n\n                if (!resources[query]) {\n                  _context.next = 6;\n                  break;\n                }\n\n                // Return result if it exists\n                // console.log(resources);\n                console.log(\"*******************\");\n                return _context.abrupt(\"return\", resources[query]);\n\n              case 6:\n                _context.next = 8;\n                return axios(query, {\n                  cancelToken: cancel.token\n                });\n\n              case 8:\n                res = _context.sent;\n                result = res.data.results; // Store response\n\n                resources[query] = result;\n                return _context.abrupt(\"return\", result);\n\n              case 14:\n                _context.prev = 14;\n                _context.t0 = _context[\"catch\"](2);\n\n                if (axios.isCancel(_context.t0)) {// Handle if request was cancelled\n                  //console.log(\"Request canceled\", error.message);\n                } else {// Handle usual errors\n                    //console.log(\"Something went wrong: \", error.message);\n                  }\n\n              case 17:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[2, 14]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()\n  );\n};\n\nexport var search = makeRequestCreator();","map":{"version":3,"sources":["C:/Users/RahulChauhan/Desktop/screenshots/containers crush/github projects/shopping_cart_final/searchProducts/src/utils.js"],"names":["axios","truncStr","string","limit","length","trim","substring","resources","makeRequestCreator","cancel","query","CancelToken","source","console","log","cancelToken","token","res","result","data","results","isCancel","search"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAO,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,MAAD,EAASC,KAAT,EAAmB;AACzC,SAAOD,MAAM,CAACE,MAAP,GAAgBD,KAAhB,GACHD,MAAM,CACHG,IADH,GAEGC,SAFH,CAEa,CAFb,EAEgBH,KAAK,GAAG,CAFxB,EAGGE,IAHH,KAGY,KAJT,GAKHH,MALJ;AAMD,CAPM;AASP,IAAMK,SAAS,GAAG,EAAlB;;AAEA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,GAAM;AAC/B,MAAIC,MAAJ;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAAO,iBAAMC,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AACL,oBAAID,MAAJ,EAAY;AACV;AACAA,kBAAAA,MAAM,CAACA,MAAP;AACD,iBAJI,CAKL;;;AACAA,gBAAAA,MAAM,GAAGT,KAAK,CAACW,WAAN,CAAkBC,MAAlB,EAAT;AANK;;AAAA,qBAQCL,SAAS,CAACG,KAAD,CARV;AAAA;AAAA;AAAA;;AASD;AACF;AACCG,gBAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AAXE,iDAYMP,SAAS,CAACG,KAAD,CAZf;;AAAA;AAAA;AAAA,uBAceV,KAAK,CAACU,KAAD,EAAQ;AAAEK,kBAAAA,WAAW,EAAEN,MAAM,CAACO;AAAtB,iBAAR,CAdpB;;AAAA;AAcGC,gBAAAA,GAdH;AAgBGC,gBAAAA,MAhBH,GAgBYD,GAAG,CAACE,IAAJ,CAASC,OAhBrB,EAiBH;;AACAb,gBAAAA,SAAS,CAACG,KAAD,CAAT,GAAmBQ,MAAnB;AAlBG,iDAoBIA,MApBJ;;AAAA;AAAA;AAAA;;AAsBH,oBAAIlB,KAAK,CAACqB,QAAN,aAAJ,EAA2B,CACzB;AACA;AACD,iBAHD,MAGO,CACL;AACA;AACD;;AA5BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAP;;AAAA;AAAA;AAAA;AAAA;AAAA;AA+BD,CAlCD;;AAoCA,OAAO,IAAMC,MAAM,GAAGd,kBAAkB,EAAjC","sourcesContent":["import axios from \"axios\";\r\n\r\nexport const truncStr = (string, limit) => {\r\n  return string.length > limit\r\n    ? string\r\n        .trim()\r\n        .substring(0, limit - 3)\r\n        .trim() + \"...\"\r\n    : string;\r\n};\r\n\r\nconst resources = {};\r\n\r\nconst makeRequestCreator = () => {\r\n  let cancel;\r\n\r\n  return async query => {\r\n    if (cancel) {\r\n      // Cancel the previous request before making a new request\r\n      cancel.cancel();\r\n    }\r\n    // Create a new CancelToken\r\n    cancel = axios.CancelToken.source();\r\n    try {\r\n      if (resources[query]) {\r\n        // Return result if it exists\r\n    \t // console.log(resources);\r\n    \t  console.log(\"*******************\");\r\n        return resources[query];\r\n      }\r\n      const res = await axios(query, { cancelToken: cancel.token });\r\n\r\n      const result = res.data.results;\r\n      // Store response\r\n      resources[query] = result;\r\n\r\n      return result;\r\n    } catch (error) {\r\n      if (axios.isCancel(error)) {\r\n        // Handle if request was cancelled\r\n        //console.log(\"Request canceled\", error.message);\r\n      } else {\r\n        // Handle usual errors\r\n        //console.log(\"Something went wrong: \", error.message);\r\n      }\r\n    }\r\n  };\r\n};\r\n\r\nexport const search = makeRequestCreator();\r\n"]},"metadata":{},"sourceType":"module"}